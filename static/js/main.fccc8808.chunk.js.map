{"version":3,"sources":["maze.ts","Ball.ts","keyBoardManager.ts","renderManager.ts","index.js"],"names":["MazeArr","rowLegnth","tileWidth","maze","roadRun","backPointList","startPositionIndex","endIndex","graphics","directionList","this","init","tempMazeRow","totalPushTime","index","push","tempMaze","gapRow","arr","tempMazeOuterFrameRow","createMazeRow","rowIndex","colIndex","YVector","XVector","aroundStaus","checkPositionByVector","times","String","forEach","directionVector","vectorIndex","around","indexOf","arrInclude12","el","value","randomIndex","Math","floor","random","length","index_direction","colChangeTo","status","backIndex_direction","key","sort","a","b","stepNum","row","col","createEmptyMaze","handleNextDirection","checkAround","YV","XV","slice","createEnd","createMazeGraphics","mazeGraphics","Pixi","beginFill","drawRect","endFill","endText","fontSize","fill","fontWeight","align","addChild","x","width","y","Ball","speed","radius","diameter","createBallGraphics","ballGraphics","drawCircle","bounds","height","keyBoardManager","keyBoardStatus","bindHandleUnPress","bindHandlePress","handleKeyBoardUnPress","bind","handleKeyBoardPress","e","document","addEventListener","removeEventListener","RenderManager","appWidth","rowLength","directionData","itemData","ball","app","keyBoardListenManager","appContainer","endCoordinates","endBounds","bindGameLoop","backgroundColor","w","direction","axis","vector","s","d","ticker","remove","destroy","children","texture","baseTexture","Maze","mazeIndexMapToCanvasCoordinate","KeyBoardManager","stage","gameLoop","add","initKeyListener","removeKeyListender","window","confirm","resetConfig","stop","leftTopPoint","map","coordinates","tileType","ceil","isWallByXY","keyCode","isTouchByBounds","handleWin","isTouchWall","getMaxCoordinates","handleKeyBoardStatus","bodyEl","querySelector","style","margin","padding","innerHeight","innerWidth","renderManager","min","body","appendChild","view"],"mappings":"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","file":"static/js/main.fccc8808.chunk.js","sourcesContent":["/*\n  array element mean:\n  0:外框, edge\n  1:間隔, interval\n  2:未造訪, Not visited\n  3:已造訪, Visited\n  4:已回朔, Backtracked\n  5:不合法, illegal\n  6:起點, starting point\n  7:終點, end point\n*/\n/*\n  vector array index mean:\n  [up,right,down,left]\n  0:上\n  1:右\n  2:下\n  3:左\n*/\nimport * as Pixi from 'pixi.js'\nexport default class MazeArr {\n    maze!: string[][]\n    roadRun: string\n    tileWidth:number\n    backPointList: any[]\n    startPositionIndex: number\n    endIndex!: {\n        row: number\n        col: number\n    }\n    graphics!: Pixi.Graphics\n    private rowLegnth: number\n    private directionList: any\n    constructor(rowLegnth: number,tileWidth:number) {\n        this.tileWidth =tileWidth \n        this.rowLegnth = rowLegnth || 25\n        this.directionList = [[-1, 0], [0, 1], [1, 0], [0, -1]]\n        this.roadRun = ''\n        this.startPositionIndex = (this.rowLegnth - 1) / 2\n        this.backPointList = []\n        this.init()\n    }\n    createMazeRow() {\n        let tempMazeRow = ['0']  //ex:0,2,1,2,1,2,1,2,0\n        const totalPushTime = (this.rowLegnth - 1) / 2\n        for (let index = 0; index < totalPushTime; index++) {\n            tempMazeRow.push('2')\n            if (index + 1 !== totalPushTime) {\n                tempMazeRow.push('1')\n            }\n        }\n        tempMazeRow.push('0')\n        return tempMazeRow\n    }\n    createEmptyMaze() {\n        let tempMaze = []\n        const gapRow = (() => {\n            let arr = ['0']\n            for (let index = 0; index < this.rowLegnth - 2; index++) {\n                arr.push('1')\n            }\n            arr.push('0')\n            return arr\n        })()\n        const tempMazeOuterFrameRow = (() => {\n            let arr = []\n            for (let index = 0; index < this.rowLegnth; index++) {\n                arr.push('0')\n            }\n            return arr\n        })()\n        tempMaze.push([...tempMazeOuterFrameRow])\n        for (let index = 1; index < this.rowLegnth / 2; index++) {\n            tempMaze.push(this.createMazeRow())\n            if (index !== (this.rowLegnth - 1) / 2) {\n                tempMaze.push([...gapRow])\n            }\n        }\n        tempMaze.push([...tempMazeOuterFrameRow])\n        tempMaze[this.startPositionIndex][this.startPositionIndex] = '6'//設置起點, set start point\n        return [...tempMaze]\n    }\n    checkAround(rowIndex: number, colIndex: number): string[] {\n        let aroundStaus = ['', '', '', ''] //[up,right,bottom,left]\n        let YVector: number\n        let XVector: number\n        const checkPositionByVector = (times: number) => { // 5 is out of boundry\n            if (this.maze[rowIndex + YVector * times]) {\n                if (this.maze[rowIndex + YVector * times][colIndex + XVector * times]) {\n                    return String(this.maze[rowIndex + YVector * times][colIndex + XVector * times])\n                } else {\n                    return '5'\n                }\n            } else {\n                return '5'\n            }\n        }\n        this.directionList.forEach((directionVector: number[], vectorIndex: number) => {\n            YVector = directionVector[0]\n            XVector = directionVector[1]\n            aroundStaus[vectorIndex] = checkPositionByVector(1) + checkPositionByVector(2)\n        });\n        return aroundStaus\n    }\n\n    handleNextDirection(around: string[]): any {\n        /*\n        有12最優先\n        有36則表示回到起點了\n        若沒有12、36，只有13 33 則往33走 把本身加路徑變為已回朔，注意 終點不改變\n\n        12 is top priority,\n        \n        if 36, meaning have be back to the starting point\n        \n        if without 12、36, and only has 13、33 ,then go 33, \n        making path and self to 4(backtracked).\n        */\n        if (around.indexOf('12') !== -1) {\n            let arrInclude12: { value: string, index: number }[] = []\n            around.forEach((el, index) => {\n                if (el === '12') {\n                    arrInclude12.push({ value: el, index: index })\n                }\n            });\n            let randomIndex = Math.floor(Math.random() * (arrInclude12.length))\n            while (randomIndex === arrInclude12.length) {\n                randomIndex = Math.floor(Math.random() * (arrInclude12.length))\n            }\n            return { index_direction: arrInclude12[randomIndex]['index'], colChangeTo: '3', status: 'roading' }\n        } else {\n            let backIndex_direction\n            if (around.indexOf('36') !== -1) {//回到起點, back to start point\n                for (const key in around) {\n                    if (around[key] === '36') {\n                        backIndex_direction = key\n                    }\n                }\n                //console.log('渲染結束'), render end\n                return { index_direction: backIndex_direction, colChangeTo: '4', status: 'backToStart' }\n            }\n            else if (around.indexOf('44') === -1 && around.indexOf('33') !== -1) {//折返起點, backtracked start point\n                for (const key in around) {\n                    if (around[key] === '33') {\n                        backIndex_direction = key\n                    }\n                }\n                //console.log('折返起點')\n                return { index_direction: backIndex_direction, colChangeTo: '4', status: 'backPoint' }\n            }\n            else if (around.indexOf('33') !== -1) {//折返中, backtracking\n                for (const key in around) {\n                    if (around[key] === '33') {\n                        backIndex_direction = key\n                    }\n                }\n                //console.log('需折返'), need to backtrack\n                return { index_direction: backIndex_direction, colChangeTo: '4', status: 'backing' }\n            }\n        }\n    }\n    createEnd() {\n        this.backPointList.sort(function (a, b) {\n            return b.stepNum - a.stepNum;\n        });\n        this.endIndex = {\n            row: this.backPointList[0].rowIndex,\n            col: this.backPointList[0].colIndex\n        }\n        this.maze[this.backPointList[0].rowIndex][this.backPointList[0].colIndex] = '7'\n    }\n    init() {\n        this.maze = this.createEmptyMaze()\n        let rowIndex = this.startPositionIndex\n        let colIndex = this.startPositionIndex\n        while (true) {\n            const { index_direction, colChangeTo, status } = this.handleNextDirection(this.checkAround(rowIndex, colIndex))\n            const YV = this.directionList[index_direction][0]\n            const XV = this.directionList[index_direction][1]\n            if (this.maze[rowIndex][colIndex] !== '6') {\n                this.maze[rowIndex][colIndex] = colChangeTo\n            }\n            this.maze[rowIndex + YV][colIndex + XV] = colChangeTo\n            if (status === 'backToStart') {\n                this.roadRun += index_direction\n                break\n            } else if (status === 'roading') {\n                this.roadRun += index_direction\n            } else if (status === 'backPoint') {\n                this.roadRun = this.roadRun.slice(0, -1);\n                this.backPointList.push({ rowIndex: rowIndex, colIndex: colIndex, stepNum: this.roadRun.length })\n            } else if (status === 'backing') {\n                this.roadRun = this.roadRun.slice(0, -1);\n            }\n            rowIndex = rowIndex + YV * 2\n            colIndex = colIndex + XV * 2\n        }\n        this.createEnd()\n        this.createMazeGraphics()\n    }\n    createMazeGraphics() {\n        let mazeGraphics = new Pixi.Graphics()\n        this.maze.forEach((row, rowIndex) => {\n            row.forEach((col, colIndex) => {\n                if (col === '1' || col === '0') { // 1 is wall, 0 is edge\n                    mazeGraphics.beginFill(0x000000);\n                    mazeGraphics.drawRect(\n                        this.tileWidth * rowIndex,\n                        this.tileWidth * colIndex,\n                        this.tileWidth,\n                        this.tileWidth)\n                    mazeGraphics.endFill();\n                }\n                else if (col === '7') { //end\n                    const endText = new Pixi.Text('終', { fontSize: this.tileWidth, fill: 0xff0000, fontWeight: 900, align: \"\" });\n                    mazeGraphics.addChild(endText)\n                    endText.x = rowIndex * this.tileWidth + (this.tileWidth - endText.width) / 2\n                    endText.y = colIndex * this.tileWidth + (this.tileWidth - endText.width) / 2\n                }\n            })\n        })\n        this.graphics = mazeGraphics\n    }\n}","import * as Pixi from 'pixi.js'\r\nexport default class Ball {\r\n    tileWidth: number\r\n    speed: number\r\n    radius: number\r\n    diameter: number\r\n    graphics: Pixi.Graphics\r\n    constructor(tileWidth: number) {\r\n        this.tileWidth = tileWidth\r\n        this.speed = tileWidth / 3 //ball would go out of tile when too fast\r\n        this.radius = tileWidth / 4\r\n        this.diameter = this.radius * 2\r\n        this.graphics = this.createBallGraphics()\r\n    }\r\n    createBallGraphics() {\r\n        let ballGraphics = new Pixi.Graphics()\r\n        ballGraphics.beginFill(0xff0000);\r\n        ballGraphics.drawCircle(this.radius, this.radius, this.radius)\r\n        ballGraphics.endFill();\r\n        return ballGraphics\r\n    }\r\n    isTouchByBounds(bounds: { x: number, y: number, width: number, height: number }) {\r\n        return this.graphics.x + this.diameter > bounds.x &&\r\n            this.graphics.x < bounds.x + bounds.width &&\r\n            this.graphics.y + this.diameter > bounds.y &&\r\n            this.graphics.y < bounds.y + bounds.height;\r\n    }\r\n}","export default class keyBoardManager {\r\n    keyBoardStatus: any\r\n    bindHandleUnPress: (e:KeyboardEvent) => void\r\n    bindHandlePress: (e:KeyboardEvent) => void\r\n    constructor() {\r\n        this.keyBoardStatus = {\r\n            'w': false,\r\n            'a': false,\r\n            's': false,\r\n            'd': false\r\n        }\r\n        this.bindHandleUnPress = this.handleKeyBoardUnPress.bind(this)\r\n        this.bindHandlePress = this.handleKeyBoardPress.bind(this)\r\n    }\r\n    handleKeyBoardPress(e: KeyboardEvent) {\r\n        const { key } = e\r\n        if (!(key in this.keyBoardStatus)) {\r\n            return\r\n        }\r\n        //@ts-ignore\r\n        this.keyBoardStatus[key] = true\r\n    }\r\n    handleKeyBoardUnPress(e: KeyboardEvent) {\r\n        const { key } = e\r\n        if (!(key in this.keyBoardStatus)) {\r\n            return\r\n        }\r\n        //@ts-ignore\r\n        this.keyBoardStatus[key] = false\r\n    }\r\n    initKeyListener() {\r\n        document.addEventListener('keyup', this.bindHandleUnPress)\r\n        document.addEventListener('keydown', this.bindHandlePress)\r\n    }\r\n    removeKeyListender() {\r\n        document.removeEventListener('keyup', this.bindHandleUnPress)\r\n        document.removeEventListener('keydown', this.bindHandlePress)\r\n    }\r\n}","\nimport * as Pixi from 'pixi.js'\nimport Maze from './maze'\nimport Ball from './Ball'\nimport KeyBoardManager from './keyBoardManager'\nexport default class RenderManager {\n    appWidth: number\n    rowLength: number\n    tileWidth: number //px\n    directionData: {\n        [key: string]: {\n            axis: 'y' | 'x',\n            vector: -1 | 1,\n            direction: 'up' | 'left' | 'down' | 'right'\n        }\n    }\n    itemData: any\n    //set in init\n    ball!: Ball\n    app!: Pixi.Application\n    maze!: Maze\n    keyBoardListenManager!: KeyBoardManager\n    appContainer!: Pixi.Container\n    keyBoardStatus!: { 'w': boolean, 'a': boolean, 's': boolean, 'd': boolean }\n    endCoordinates!: number[][]\n    endBounds!: any\n    bindHandlePress!: (e: KeyboardEvent) => void\n    bindHandleUnPress!: (e: KeyboardEvent) => void\n    bindGameLoop!: () => void\n    constructor(\n        appWidth: number,\n        rowLength: number\n    ) {\n        this.rowLength = rowLength\n        this.appWidth = appWidth\n        this.tileWidth = appWidth / rowLength\n        this.app = new Pixi.Application({\n            width: this.appWidth,\n            height: this.appWidth,\n            backgroundColor: 0xFFFFFF\n        })\n        this.directionData = {\n            w: {\n                direction: 'up',\n                axis: 'y',\n                vector: -1\n            },\n            a: {\n                direction: 'left',\n                axis: 'x',\n                vector: -1\n            },\n            s: {\n                direction: 'down',\n                axis: 'y',\n                vector: 1\n            },\n            d: {\n                direction: 'right',\n                axis: 'x',\n                vector: 1\n            },\n        }\n\n        this.init()\n    }\n    resetConfig() {\n        this.app.ticker.remove(this.bindGameLoop)\n        this.appContainer.destroy({\n            children: true,\n            texture: true,\n            baseTexture: true\n        })\n    }\n    init() {\n        this.appContainer = new Pixi.Container()\n        this.maze = new Maze(this.rowLength, this.tileWidth)\n        this.endCoordinates = this.mazeIndexMapToCanvasCoordinate(this.maze.endIndex.row, this.maze.endIndex.col)\n        this.endBounds = {\n            x: this.endCoordinates[0][0],\n            y: this.endCoordinates[0][1],\n            width: this.tileWidth,\n            height: this.tileWidth\n        }\n        this.keyBoardListenManager = new KeyBoardManager()\n        this.ball = new Ball(this.tileWidth)\n        this.appContainer.addChild(this.maze.graphics, this.ball.graphics)\n        this.ball.graphics.x = (this.appWidth / 2) - this.ball.radius\n        this.ball.graphics.y = (this.appWidth / 2) - this.ball.radius\n        this.app.stage.addChild(this.appContainer)\n        this.bindGameLoop = this.gameLoop.bind(this)\n        this.app.ticker.add(this.bindGameLoop)\n        this.keyBoardListenManager.initKeyListener()\n    }\n    handleWin() {\n        this.keyBoardListenManager.removeKeyListender()\n        if (window.confirm('win，another game?')) {\n            this.resetConfig()\n            this.init()\n        } else {\n            this.app.ticker.stop()\n        }\n    }\n    mazeIndexMapToCanvasCoordinate(rowIndex: number, colIndex: number) {\n        const leftTopPoint = [rowIndex * this.tileWidth, colIndex * this.tileWidth]\n        return [leftTopPoint, leftTopPoint.map(coordinates => coordinates + this.tileWidth)]\n    }\n    isWallByXY(x: number, y: number) {\n        const tileType = this.maze.maze[Math.ceil(x / this.tileWidth) - 1][Math.ceil(y / this.tileWidth) - 1]\n        return tileType === '0' || tileType === '1' //0 is edge, 1 is wall\n    }\n    getMaxCoordinates(direction: 'up' | 'down' | 'left' | 'right', x: number, y: number) {//when touch wall\n        switch (direction) {\n            case 'up':\n                return y - y % this.tileWidth + 2\n            case 'right':\n                return x - (x + this.ball.diameter) % this.tileWidth + this.tileWidth - 2\n            case 'down':\n                return y - (y + this.ball.diameter) % this.tileWidth + this.tileWidth - 2\n            case 'left':\n                return x - x % this.tileWidth + 2\n        }\n    }\n    isTouchWall(direction: 'up' | 'down' | 'left' | 'right', x: number, y: number) {\n        switch (direction) {\n            case 'up':\n                if (this.isWallByXY(x, y - this.ball.speed) ||\n                    this.isWallByXY(x + this.ball.diameter, y - this.ball.speed)) {\n                    return true\n                }\n                break\n            case 'right':\n                if (this.isWallByXY(x + this.ball.diameter + this.ball.speed, y) ||\n                    this.isWallByXY(x + this.ball.diameter + this.ball.speed, y + this.ball.diameter)) {\n                    return true\n                }\n                break\n            case 'down':\n                if (this.isWallByXY(x, y + this.ball.diameter + this.ball.speed) ||\n                    this.isWallByXY(x + this.ball.diameter, y + this.ball.diameter + this.ball.speed)) {\n                    return true\n                }\n                break\n            case 'left':\n                if (this.isWallByXY(x - this.ball.speed, y) ||\n                    this.isWallByXY(x - this.ball.speed, y + this.ball.diameter)) {\n                    return true\n                }\n                break\n        }\n        return false\n    }\n    handleKeyBoardStatus(keyCode: 'w' | 'a' | 's' | 'd') {\n        if (this.ball.isTouchByBounds(this.endBounds)) {\n            this.handleWin()\n            return\n        }\n        const { x, y } = this.ball.graphics\n        const { vector, direction, axis } = this.directionData[keyCode]\n        if (this.isTouchWall(direction, x, y)) {\n            this.ball.graphics[axis] = this.getMaxCoordinates(direction, x, y)\n        } else {\n            this.ball.graphics[axis] += this.ball.speed * vector\n        }\n    }\n    gameLoop() {\n        if (!this.keyBoardListenManager.keyBoardStatus['w'] || !this.keyBoardListenManager.keyBoardStatus['s']) {\n            if (this.keyBoardListenManager.keyBoardStatus['w']) {\n                this.handleKeyBoardStatus('w')\n            }\n            if (this.keyBoardListenManager.keyBoardStatus['s']) {\n                this.handleKeyBoardStatus('s')\n            }\n        }\n        if (!this.keyBoardListenManager.keyBoardStatus['a'] || !this.keyBoardListenManager.keyBoardStatus['d']) {\n            if (this.keyBoardListenManager.keyBoardStatus['a']) {\n                this.handleKeyBoardStatus('a')\n            }\n            if (this.keyBoardListenManager.keyBoardStatus['d']) {\n                this.handleKeyBoardStatus('d')\n            }\n        }\n    }\n}","import RenderManager from './renderManager'\nconst bodyEl = document.querySelector('body')\nbodyEl.style.margin = 0\nbodyEl.style.padding = 0\nconst { innerHeight, innerWidth } = window\nconst TILE_NUM = 19 // it must match 7+4n \nconst renderManager = new RenderManager(Math.min(innerHeight, innerWidth), TILE_NUM)\ndocument.body.appendChild(renderManager.app.view)"],"sourceRoot":""}