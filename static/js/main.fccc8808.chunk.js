(this.webpackJsonppixi2=this.webpackJsonppixi2||[]).push([[0],{12:function(i,t,e){i.exports=e(22)},22:function(i,t,e){"use strict";e.r(t);var s=e(1),a=e(2),n=e(3),h=e(6),r=function(){function i(t,e){Object(s.a)(this,i),this.maze=void 0,this.roadRun=void 0,this.tileWidth=void 0,this.backPointList=void 0,this.startPositionIndex=void 0,this.endIndex=void 0,this.graphics=void 0,this.rowLegnth=void 0,this.directionList=void 0,this.tileWidth=e,this.rowLegnth=t||25,this.directionList=[[-1,0],[0,1],[1,0],[0,-1]],this.roadRun="",this.startPositionIndex=(this.rowLegnth-1)/2,this.backPointList=[],this.init()}return Object(a.a)(i,[{key:"createMazeRow",value:function(){for(var i=["0"],t=(this.rowLegnth-1)/2,e=0;e<t;e++)i.push("2"),e+1!==t&&i.push("1");return i.push("0"),i}},{key:"createEmptyMaze",value:function(){var i=this,t=[],e=function(){for(var t=["0"],e=0;e<i.rowLegnth-2;e++)t.push("1");return t.push("0"),t}(),s=function(){for(var t=[],e=0;e<i.rowLegnth;e++)t.push("0");return t}();t.push(Object(h.a)(s));for(var a=1;a<this.rowLegnth/2;a++)t.push(this.createMazeRow()),a!==(this.rowLegnth-1)/2&&t.push(Object(h.a)(e));return t.push(Object(h.a)(s)),t[this.startPositionIndex][this.startPositionIndex]="6",[].concat(t)}},{key:"checkAround",value:function(i,t){var e,s,a=this,n=["","","",""],h=function(n){return a.maze[i+e*n]&&a.maze[i+e*n][t+s*n]?String(a.maze[i+e*n][t+s*n]):"5"};return this.directionList.forEach((function(i,t){e=i[0],s=i[1],n[t]=h(1)+h(2)})),n}},{key:"handleNextDirection",value:function(i){if(-1!==i.indexOf("12")){var t=[];i.forEach((function(i,e){"12"===i&&t.push({value:i,index:e})}));for(var e=Math.floor(Math.random()*t.length);e===t.length;)e=Math.floor(Math.random()*t.length);return{index_direction:t[e].index,colChangeTo:"3",status:"roading"}}var s;if(-1!==i.indexOf("36")){for(var a in i)"36"===i[a]&&(s=a);return{index_direction:s,colChangeTo:"4",status:"backToStart"}}if(-1===i.indexOf("44")&&-1!==i.indexOf("33")){for(var n in i)"33"===i[n]&&(s=n);return{index_direction:s,colChangeTo:"4",status:"backPoint"}}if(-1!==i.indexOf("33")){for(var h in i)"33"===i[h]&&(s=h);return{index_direction:s,colChangeTo:"4",status:"backing"}}}},{key:"createEnd",value:function(){this.backPointList.sort((function(i,t){return t.stepNum-i.stepNum})),this.endIndex={row:this.backPointList[0].rowIndex,col:this.backPointList[0].colIndex},this.maze[this.backPointList[0].rowIndex][this.backPointList[0].colIndex]="7"}},{key:"init",value:function(){this.maze=this.createEmptyMaze();for(var i=this.startPositionIndex,t=this.startPositionIndex;;){var e=this.handleNextDirection(this.checkAround(i,t)),s=e.index_direction,a=e.colChangeTo,n=e.status,h=this.directionList[s][0],r=this.directionList[s][1];if("6"!==this.maze[i][t]&&(this.maze[i][t]=a),this.maze[i+h][t+r]=a,"backToStart"===n){this.roadRun+=s;break}"roading"===n?this.roadRun+=s:"backPoint"===n?(this.roadRun=this.roadRun.slice(0,-1),this.backPointList.push({rowIndex:i,colIndex:t,stepNum:this.roadRun.length})):"backing"===n&&(this.roadRun=this.roadRun.slice(0,-1)),i+=2*h,t+=2*r}this.createEnd(),this.createMazeGraphics()}},{key:"createMazeGraphics",value:function(){var i=this,t=new n.c;this.maze.forEach((function(e,s){e.forEach((function(e,a){if("1"===e||"0"===e)t.beginFill(0),t.drawRect(i.tileWidth*s,i.tileWidth*a,i.tileWidth,i.tileWidth),t.endFill();else if("7"===e){var h=new n.d("\u7d42",{fontSize:i.tileWidth,fill:16711680,fontWeight:900,align:""});t.addChild(h),h.x=s*i.tileWidth+(i.tileWidth-h.width)/2,h.y=a*i.tileWidth+(i.tileWidth-h.width)/2}}))})),this.graphics=t}}]),i}(),d=function(){function i(t){Object(s.a)(this,i),this.tileWidth=void 0,this.speed=void 0,this.radius=void 0,this.diameter=void 0,this.graphics=void 0,this.tileWidth=t,this.speed=t/3,this.radius=t/4,this.diameter=2*this.radius,this.graphics=this.createBallGraphics()}return Object(a.a)(i,[{key:"createBallGraphics",value:function(){var i=new n.c;return i.beginFill(16711680),i.drawCircle(this.radius,this.radius,this.radius),i.endFill(),i}},{key:"isTouchByBounds",value:function(i){return this.graphics.x+this.diameter>i.x&&this.graphics.x<i.x+i.width&&this.graphics.y+this.diameter>i.y&&this.graphics.y<i.y+i.height}}]),i}(),o=function(){function i(){Object(s.a)(this,i),this.keyBoardStatus=void 0,this.bindHandleUnPress=void 0,this.bindHandlePress=void 0,this.keyBoardStatus={w:!1,a:!1,s:!1,d:!1},this.bindHandleUnPress=this.handleKeyBoardUnPress.bind(this),this.bindHandlePress=this.handleKeyBoardPress.bind(this)}return Object(a.a)(i,[{key:"handleKeyBoardPress",value:function(i){var t=i.key;t in this.keyBoardStatus&&(this.keyBoardStatus[t]=!0)}},{key:"handleKeyBoardUnPress",value:function(i){var t=i.key;t in this.keyBoardStatus&&(this.keyBoardStatus[t]=!1)}},{key:"initKeyListener",value:function(){document.addEventListener("keyup",this.bindHandleUnPress),document.addEventListener("keydown",this.bindHandlePress)}},{key:"removeKeyListender",value:function(){document.removeEventListener("keyup",this.bindHandleUnPress),document.removeEventListener("keydown",this.bindHandlePress)}}]),i}(),l=function(){function i(t,e){Object(s.a)(this,i),this.appWidth=void 0,this.rowLength=void 0,this.tileWidth=void 0,this.directionData=void 0,this.itemData=void 0,this.ball=void 0,this.app=void 0,this.maze=void 0,this.keyBoardListenManager=void 0,this.appContainer=void 0,this.keyBoardStatus=void 0,this.endCoordinates=void 0,this.endBounds=void 0,this.bindHandlePress=void 0,this.bindHandleUnPress=void 0,this.bindGameLoop=void 0,this.rowLength=e,this.appWidth=t,this.tileWidth=t/e,this.app=new n.a({width:this.appWidth,height:this.appWidth,backgroundColor:16777215}),this.directionData={w:{direction:"up",axis:"y",vector:-1},a:{direction:"left",axis:"x",vector:-1},s:{direction:"down",axis:"y",vector:1},d:{direction:"right",axis:"x",vector:1}},this.init()}return Object(a.a)(i,[{key:"resetConfig",value:function(){this.app.ticker.remove(this.bindGameLoop),this.appContainer.destroy({children:!0,texture:!0,baseTexture:!0})}},{key:"init",value:function(){this.appContainer=new n.b,this.maze=new r(this.rowLength,this.tileWidth),this.endCoordinates=this.mazeIndexMapToCanvasCoordinate(this.maze.endIndex.row,this.maze.endIndex.col),this.endBounds={x:this.endCoordinates[0][0],y:this.endCoordinates[0][1],width:this.tileWidth,height:this.tileWidth},this.keyBoardListenManager=new o,this.ball=new d(this.tileWidth),this.appContainer.addChild(this.maze.graphics,this.ball.graphics),this.ball.graphics.x=this.appWidth/2-this.ball.radius,this.ball.graphics.y=this.appWidth/2-this.ball.radius,this.app.stage.addChild(this.appContainer),this.bindGameLoop=this.gameLoop.bind(this),this.app.ticker.add(this.bindGameLoop),this.keyBoardListenManager.initKeyListener()}},{key:"handleWin",value:function(){this.keyBoardListenManager.removeKeyListender(),window.confirm("win\uff0canother game?")?(this.resetConfig(),this.init()):this.app.ticker.stop()}},{key:"mazeIndexMapToCanvasCoordinate",value:function(i,t){var e=this,s=[i*this.tileWidth,t*this.tileWidth];return[s,s.map((function(i){return i+e.tileWidth}))]}},{key:"isWallByXY",value:function(i,t){var e=this.maze.maze[Math.ceil(i/this.tileWidth)-1][Math.ceil(t/this.tileWidth)-1];return"0"===e||"1"===e}},{key:"getMaxCoordinates",value:function(i,t,e){switch(i){case"up":return e-e%this.tileWidth+2;case"right":return t-(t+this.ball.diameter)%this.tileWidth+this.tileWidth-2;case"down":return e-(e+this.ball.diameter)%this.tileWidth+this.tileWidth-2;case"left":return t-t%this.tileWidth+2}}},{key:"isTouchWall",value:function(i,t,e){switch(i){case"up":if(this.isWallByXY(t,e-this.ball.speed)||this.isWallByXY(t+this.ball.diameter,e-this.ball.speed))return!0;break;case"right":if(this.isWallByXY(t+this.ball.diameter+this.ball.speed,e)||this.isWallByXY(t+this.ball.diameter+this.ball.speed,e+this.ball.diameter))return!0;break;case"down":if(this.isWallByXY(t,e+this.ball.diameter+this.ball.speed)||this.isWallByXY(t+this.ball.diameter,e+this.ball.diameter+this.ball.speed))return!0;break;case"left":if(this.isWallByXY(t-this.ball.speed,e)||this.isWallByXY(t-this.ball.speed,e+this.ball.diameter))return!0}return!1}},{key:"handleKeyBoardStatus",value:function(i){if(this.ball.isTouchByBounds(this.endBounds))this.handleWin();else{var t=this.ball.graphics,e=t.x,s=t.y,a=this.directionData[i],n=a.vector,h=a.direction,r=a.axis;this.isTouchWall(h,e,s)?this.ball.graphics[r]=this.getMaxCoordinates(h,e,s):this.ball.graphics[r]+=this.ball.speed*n}}},{key:"gameLoop",value:function(){this.keyBoardListenManager.keyBoardStatus.w&&this.keyBoardListenManager.keyBoardStatus.s||(this.keyBoardListenManager.keyBoardStatus.w&&this.handleKeyBoardStatus("w"),this.keyBoardListenManager.keyBoardStatus.s&&this.handleKeyBoardStatus("s")),this.keyBoardListenManager.keyBoardStatus.a&&this.keyBoardListenManager.keyBoardStatus.d||(this.keyBoardListenManager.keyBoardStatus.a&&this.handleKeyBoardStatus("a"),this.keyBoardListenManager.keyBoardStatus.d&&this.handleKeyBoardStatus("d"))}}]),i}(),c=document.querySelector("body");c.style.margin=0,c.style.padding=0;var u=window,p=u.innerHeight,v=u.innerWidth,y=new l(Math.min(p,v),19);document.body.appendChild(y.app.view)}},[[12,1,2]]]);
//# sourceMappingURL=main.fccc8808.chunk.js.map